<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard - LH Coffee</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
      integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/css/admin-style.css" />
    <link rel="stylesheet" href="/css/notification.css" />
    <link rel="stylesheet" href="/css/admin-sidebar.css" />

    <!-- Inline style để đảm bảo sidebar hiển thị -->
    <style>
      .sidebar {
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
      }

      .stats-card {
        background: #fff;
        border-radius: 7px;
        box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.1);
        margin-bottom: 25px;
        padding: 20px;
      }

      .stats-card h3 {
        margin-bottom: 15px;
        color: #5c5c5c;
        font-size: 18px;
      }

      .stats-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        grid-gap: 15px;
      }

      .stat-item {
        padding: 15px;
        border-radius: 5px;
        text-align: center;
        background-color: #f8f9fa;
        border-left: 4px solid var(--main-color);
      }

      .stat-value {
        font-size: 24px;
        font-weight: bold;
        margin-bottom: 5px;
        color: #333;
      }

      .stat-label {
        font-size: 14px;
        color: #666;
      }
    </style>
  </head>

  <body>
    <input type="checkbox" id="sidebar-toggle" />
    <div class="sidebar" id="sidebar-container"></div>
    <div class="main-content">
      <header>
        <div class="search-wrapper">
          <span class="fa fa-search"></span>
          <input type="search" placeholder="Search" />
        </div>
        <div class="social-icons">
          <span class="fa fa-bell"></span>
          <span class="fa fa-comment"></span>
          <div></div>
        </div>
      </header>
      <main>
        <h2 class="dash-title">Tổng quan</h2>
        <div class="dash-cards">
          <div class="card-single">
            <div class="card-body">
              <span class="fa fa-chart-line"></span>
              <div>
                <h5>Tổng doanh thu</h5>
                <h4>0 VND</h4>
              </div>
            </div>
            <div class="card-footer">
              <a href="admin-order.html">Xem chi tiết</a>
            </div>
          </div>
          <div class="card-single">
            <div class="card-body">
              <span class="fa fa-check-square"></span>
              <div>
                <h5>Doanh thu thành công</h5>
                <h4>0 VND</h4>
              </div>
            </div>
            <div class="card-footer">
              <a href="admin-order.html">Xem chi tiết</a>
            </div>
          </div>
          <div class="card-single">
            <div class="card-body">
              <span class="fa fa-sync"></span>
              <div>
                <h5>Doanh thu đang chờ</h5>
                <h4>0 VND</h4>
              </div>
            </div>
            <div class="card-footer">
              <a href="admin-order.html">Xem chi tiết</a>
            </div>
          </div>
        </div>
        <section class="recent">
          <div class="activity-grid">
            <div class="activity-card">
              <h3>Hoạt động gần đây</h3>
              <table>
                <thead>
                  <tr>
                    <th>Đơn hàng</th>
                    <th>Ngày bắt đầu</th>
                    <th>Ngày kết thúc</th>
                    <th>Người dùng</th>
                    <th>Trạng thái</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Đang tải dữ liệu...</td>
                    <td></td>
                    <td></td>
                    <td class="td-team"></td>
                    <td></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </section>

        <!-- Thêm phần thống kê chi tiết -->
        <section class="statistics">
          <div class="stats-card">
            <h3>Thống kê chi tiết</h3>
            <div class="stats-grid">
              <div class="stat-item">
                <div class="stat-value" id="totalOrders">0</div>
                <div class="stat-label">Tổng số đơn hàng</div>
              </div>
              <div class="stat-item">
                <div class="stat-value" id="completedOrders">0</div>
                <div class="stat-label">Đơn hàng hoàn thành</div>
              </div>
              <div class="stat-item">
                <div class="stat-value" id="processingOrders">0</div>
                <div class="stat-label">Đơn hàng đang xử lý</div>
              </div>
              <div class="stat-item">
                <div class="stat-value" id="cancelledOrders">0</div>
                <div class="stat-label">Đơn hàng đã hủy</div>
              </div>
              <div class="stat-item">
                <div class="stat-value" id="totalUsers">0</div>
                <div class="stat-label">Tổng số người dùng</div>
              </div>
              <div class="stat-item">
                <div class="stat-value" id="totalProducts">0</div>
                <div class="stat-label">Tổng số sản phẩm</div>
              </div>
            </div>
          </div>
        </section>
      </main>
    </div>

    <!-- Toast container cho thông báo -->
    <div class="toast-container position-fixed bottom-0 end-0 p-3"></div>

    <!-- JavaScript Dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js"></script>

    <!-- JavaScript Non-modules -->
    <script src="/js/config.js"></script>
    <script src="/js/api.js"></script>
    <script src="/js/ui.js"></script>
    <script src="/js/auth.js"></script>
    <script src="/js/admin.js"></script>
    <script src="/js/admin-dashboard.js"></script>

    <!-- Manual sidebar loader -->
    <script>
      // Tải sidebar trực tiếp nếu không được tải bởi admin.js
      document.addEventListener("DOMContentLoaded", function () {
        setTimeout(function () {
          const sidebarContainer = document.getElementById("sidebar-container");
          if (!sidebarContainer || !sidebarContainer.innerHTML.trim()) {
            console.log("Sidebar không được tải, thử tải trực tiếp...");

            // Tải sidebar trực tiếp
            fetch("sidebar.html")
              .then((response) => {
                if (!response.ok) {
                  throw new Error(
                    "Không thể tải sidebar từ đường dẫn tương đối"
                  );
                }
                return response.text();
              })
              .then((data) => {
                if (sidebarContainer) {
                  sidebarContainer.innerHTML = data;
                  console.log(
                    "Đã tải sidebar thành công với đường dẫn tương đối"
                  );

                  // Highlight trang hiện tại
                  const currentPath = window.location.pathname;
                  console.log("Đường dẫn hiện tại:", currentPath);

                  // Tìm menu phù hợp
                  if (
                    currentPath.endsWith("admin.html") ||
                    currentPath.endsWith("/admin/")
                  ) {
                    const homeMenu = document.getElementById("menu-home");
                    if (homeMenu) {
                      homeMenu.classList.add("active");
                      console.log("Đã đánh dấu menu home");
                    }
                  }
                }
              })
              .catch((error) => {
                console.error("Lỗi khi tải sidebar trực tiếp:", error);
              });
          }
        }, 1000);
      });
    </script>
  </body>
</html>
